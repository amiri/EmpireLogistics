#!/bin/bash

find data/labor_organizations/ -wholename '*.txt' -print | grep -v 'meta' | grep -v 'ar_erds_codes' | xargs pcregrep -lMn '\n\n' | xargs perl -0777 -pi -e 's/\n+/\n/g'
find data/labor_organizations/ -wholename '*.txt' -print | grep -v 'meta' | grep -v 'ar_erds_codes' | xargs grep -lPr '(?<!\|)$' | xargs grep -lPr '(?<![0-9])$' | xargs grep -lPr '(?<!RPT_ID)$' | xargs grep -lPr '(?<!TOTAL_START)$' | xargs grep -lPr '(?<!OTHER_INV_TOTAL_BOOK_VALUE)$' | xargs grep -lPr '(?<!ALL_OTHER_RECEIPTS)$' | xargs grep -lPr '(?<!CODE_DESCRIPTION)$' | xargs grep -lPr '(?<!FORM_TYPE)$' | xargs grep -lPr '(?<!ITEM_NUM)$' | xargs perl -0777 -pi -e 's/((?<!\|)(?<![0-9])(?<!RPT_ID)(?<!TOTAL_START)(?<!OTHER_INV_TOTAL_BOOK_VALUE)(?<!ALL_OTHER_RECEIPTS)(?<!CODE_DESCRIPTION)(?<!FORM_TYPE)(?<!ITEM_NUM))\n//g'
